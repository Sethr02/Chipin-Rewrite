@{
    ViewData["Title"] = "Home Page";

}

@using System.Security.Principal
@using Microsoft.AspNetCore.Authentication.OpenIdConnect
@using Microsoft.Extensions.Options
@using Microsoft.Identity.Web
@using System.Security.Claims;


<link href="~/css/site.css" rel="stylesheet" media="all">
<link href="~/css/Home.css" rel="stylesheet" media="all">




<body class="background">

    <div class="banner">

        <img src="https://cdn.pixabay.com/photo/2017/12/20/16/49/christmas-3030279_1280.jpg" />



        <div class="typewriter">
            <h2><span class="text">Gifting made simple!</span></h2>
            <div class="text_hide"></div>

        </div>

    </div>



    <a href="@Url.Action("Index", "Products", new {token = "null"  })" class="onHoverShadow link">
        <div id="Products1" class="fade-in1">
            Show now
        </div>
    </a>




        <h2><span class="text fade-in1 blue">Found the perfect gift?</span></h2>
        <h4><span class="text fade-in2 pink">Why not Chipin!</span></h4>


   


    <div class="container">



        <div class="home">
            <h1 class="title">Our Partners</h1>
            <!-- Home cards 1 -->
         
            <section class="home-cards">

                <div class="card">
                    <a href="https://shopcandy.co.za/" target="_blank">
                        <img src="/css/resource/Stores-logos-Candy.png" alt="">
                        <div class="details">
                            <h3>Candy</h3>
                            <p>
                                Smart Appliances
                            </p>

                        </div>
                    </a>
                </div>

                <div class="card">
                    <a href="https://oztrailstore.co.za/" target="_blank">
                        <img src="/css/resource/Stores-logos-Oztrail.png" alt="">
                        <div class="details">
                            <h3>Oztrail</h3>
                            <p>
                                Camping & Outdoor
                            </p>

                        </div>
                    </a>
                </div>
                <div class="card">
                    <a href="https://ryobishop.co.za/" target="_blank">
                        <img src="/css/resource/Stores-logos-Ryobi.png" alt="">
                        <div class="details">
                            <h3>Ryobi</h3>
                            <p>
                                DIY Tools & Generators
                            </p>

                        </div>
                    </a>
                </div>
                <div class="card">
                    <a href="https://djiauthorisedretailer.co.za/" target="_blank">
                        <img src="/css/resource/Stores-logos-Dji.png" alt="">
                        <div class="details">
                            <h3>DJI</h3>
                            <p>
                                Camera & Drones
                            </p>

                        </div>
                    </a>
                </div>


            </section>

        </div>




    </div>










    <div class="slider fade-container">
        <div class="slide-track">


            <div class="card slide">
                <a href="https://shopcandy.co.za/" target="_blank">
                    <img src="/css/resource/Stores-logos-Candy.png" alt="">
                    <div class="details">
                        <h3>Candy</h3>
                        <p>
                            Smart Appliances
                        </p>

                    </div>
                </a>
            </div>

            <div class="card slide">
                <a href="https://oztrailstore.co.za/" target="_blank">
                    <img src="/css/resource/Stores-logos-Oztrail.png" alt="">
                    <div class="details">
                        <h3>Oztrail</h3>
                        <p>
                            Camping & Outdoor
                        </p>

                    </div>
                </a>
            </div>
            <div class="card slide">
                <a href="https://ryobishop.co.za/" target="_blank">
                    <img src="/css/resource/Stores-logos-Ryobi.png" alt="">
                    <div class="details">
                        <h3>Ryobi</h3>
                        <p>
                            DIY Tools & Generators
                        </p>

                    </div>
                </a>
            </div>
            <div class="card slide">
                <a href="https://djiauthorisedretailer.co.za/" target="_blank">
                    <img src="/css/resource/Stores-logos-Dji.png" alt="">
                    <div class="details">
                        <h3>DJI</h3>
                        <p>
                            Camera & Drones
                        </p>

                    </div>
                </a>
            </div>











            <div class="card slide">
                <a href="https://shopcandy.co.za/" target="_blank">
                    <img src="/css/resource/Stores-logos-Candy.png" alt="">
                    <div class="details">
                        <h3>Candy</h3>
                        <p>
                            Smart Appliances
                        </p>

                    </div>
                </a>
            </div>

            <div class="card slide">
                <a href="https://oztrailstore.co.za/" target="_blank">
                    <img src="/css/resource/Stores-logos-Oztrail.png" alt="">
                    <div class="details">
                        <h3>Oztrail</h3>
                        <p>
                            Camping & Outdoor
                        </p>

                    </div>
                </a>
            </div>
            <div class="card slide">
                <a href="https://ryobishop.co.za/" target="_blank">
                    <img src="/css/resource/Stores-logos-Ryobi.png" alt="">
                    <div class="details">
                        <h3>Ryobi</h3>
                        <p>
                            DIY Tools & Generators
                        </p>

                    </div>
                </a>
            </div>
            <div class="card slide">
                <a href="https://djiauthorisedretailer.co.za/" target="_blank">
                    <img src="/css/resource/Stores-logos-Dji.png" alt="">
                    <div class="details">
                        <h3>DJI</h3>
                        <p>
                            Camera & Drones
                        </p>

                    </div>
                </a>
            </div>

        </div>
    </div>

    <button class="showPartnerBtn" onclick="viewAll()">View all</button>



</body>


<script>

    function viewAll() {
        var homeCards = document.querySelector(".home-cards");
        var slider = document.querySelector(".slider");
        var showbtn = document.querySelector(".showPartnerBtn");

        if (homeCards.style.height === "0px" || homeCards.style.height === "") {
            homeCards.style.height = "auto"; // Set height to auto before transitioning
            var computedHeight = window.getComputedStyle(homeCards).height;
            homeCards.style.height = "0"; // Set to 0 for the transition
            setTimeout(function () {
                slider.style.height = "0";
            }, 100);

            slider.style.pointerEvents = "none"; // Make the slider not clickable during transition

            setTimeout(function () {
                homeCards.style.height = computedHeight; // Set to auto after the transition starts
            }, 100);

            showbtn.innerHTML = "Hide all";


        } else {

            slider.style.height = "0";
            setTimeout(function () {
                slider.style.height = "220px";

            }, 100); // Adjust the time to match your transition duration



            homeCards.style.height = "0";



            homeCards.style.pointerEvents = "none"; // Make the element not clickable during transition


            slider.style.pointerEvents = "auto"; // Ensure the slider is clickable
            showbtn.innerHTML = "View all";
        }
    }


</script>


<script>
    function typing_animation() {
        let text_element = document.querySelector(".text");
        let text_array = text_element.innerHTML.split("");
        let text_array_slice = text_element.innerHTML.split(" ");
        let text_len = text_array.length;

        const word_len = text_array_slice.map((word) => {
            return word.length;
        })



        let timings = {
            easing: `steps(${Number(word_len[0] + 1)}, end)`,
            delay: 1000,
            duration: 1000,
            fill: 'forwards'
        }

        let cursor_timings = {
            duration: 700,
            iterations: Infinity,
            easing: 'cubic-bezier(0,.26,.44,.93)'
        }



        if (text_array_slice.length == 1) {
            timings.easing = `steps(${Number(word_len[0])}, end)`;

            let reveal_animation = document.querySelector(".text_hide").animate([
                { left: '0%' },
                { left: `${(100 / text_len) * (word_len[0])}%` }
            ], timings);



            reveal_animation.onfinish = () => {
                setTimeout(() => {
                    document.querySelector('.text_hide').animate([
                        { left: '0%' }
                    ], {
                        duration: 1000,
                        easing: 'cubic-bezier(.73,0,.38,.88)'
                    });

                    typing_animation();
                }, 1000);
            }
        } else {
            document.querySelector(".text_hide").animate([
                { left: '0%' },
                { left: `${(100 / text_len) * (word_len[0] + 1)}%` }
            ], timings);


        }


        for (let i = 1; i < text_array_slice.length; i++) {

            const single_word_len = word_len[i];


            if (i == 1) {
                var left_instance = (100 / text_len) * (word_len[i - 1] + 1);

            }

            let timings_2 = {
                easing: `steps(${Number(single_word_len + 1)}, end)`,
                delay: (2 * (i + 1) + (2 * i)) * (300),
                // delay: ((i*2)-1)*1000,
                duration: 1000,
                fill: 'forwards'
            }

            if (i == (text_array_slice.length - 1)) {
                timings_2.easing = `steps(${Number(single_word_len)}, end)`;
                let reveal_animation = document.querySelector(".text_hide").animate([
                    { left: `${left_instance}%` },
                    { left: `${left_instance + ((100 / text_len) * (word_len[i]))}%` }
                ], timings_2);



                reveal_animation.onfinish = () => {
                    setTimeout(() => {
                        document.querySelector('.text_hide').animate([
                            { left: '0%' }
                        ], {
                            duration: 1000,
                            easing: 'cubic-bezier(.73,0,.38,.88)'
                        });

                        typing_animation();
                    }, 1000);
                }
            }

            left_instance = left_instance + ((100 / text_len) * (word_len[i] + 1));
        }
    }
    typing_animation();
</script>

<script>
    function handleTokenAndRedirect() {
        if (performance.navigation.type === 1) {
            const token = localStorage.getItem('token');
            if (token) {

                const url = '/Home/Index?token=' + encodeURIComponent(token);
                window.location.href = url;
            }
        }
    }

    // Call the function when the page loads
    handleTokenAndRedirect();

    document.getElementById('Products1').addEventListener('click', function () {

        var token = localStorage.getItem('token');
        var url = '@Url.Action("Index", "Products")' + '?token=' + encodeURIComponent(token);
        window.location.href = url;
    });
</script>




